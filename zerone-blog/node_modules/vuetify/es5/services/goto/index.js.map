{"version":3,"sources":["../../../src/services/goto/index.ts"],"names":[],"mappings":";;;;;;;;;AAGA;;;kBAYwB,I;;AAdxB;;AAGA;;IAAY,c;;AACZ;;;;;;;;;;AAUc,SAAU,IAAV,CACZ,OADY,EAE+B;AAAA,QAA3C,SAA2C,uEAAF,EAAE;;AAE3C,QAAM;AACJ,mBAAY,SAAS,gBAAT,IAAoD,SAAS,IAA7D,IAAqE,SAAS,eADtF;AAEJ,kBAAU,GAFN;AAGJ,gBAAQ,CAHJ;AAIJ,gBAAQ,gBAJJ;AAKJ,mBAAW;AALP,OAMD,SANC,CAAN;AAQA,QAAM,YAAY,wBAAa,SAAS,SAAtB,CAAlB;AAEA;AACA,QAAI,SAAS,SAAT,IAAsB,KAAK,SAAL,CAAe,WAAzC,EAAsD;AACpD,YAAM,WAAW,UAAU,SAAV,CAAoB,QAApB,CAA6B,qBAA7B,CAAjB;AACA,YAAM,YAAY,UAAU,SAAV,CAAoB,QAApB,CAA6B,8BAA7B,CAAlB;AAFoD,oCAG/B,KAAK,SAAL,CAAe,WAHgB;AAAA,YAG5C,GAH4C,yBAG5C,GAH4C;AAAA,YAGvC,GAHuC,yBAGvC,GAHuC;;AAKpD,iBAAS,MAAT,IAAmB,GAAnB;AACA;AACA,YAAI,CAAC,QAAD,IAAa,SAAjB,EAA4B,SAAS,MAAT,IAAmB,GAAnB;AAC7B;AAED,QAAM,YAAY,YAAY,GAAZ,EAAlB;AACA,QAAM,iBAAiB,qBAAU,OAAV,IAAqB,SAAS,MAArD;AACA,QAAM,gBAAgB,UAAU,SAAhC;AACA,QAAI,mBAAmB,aAAvB,EAAsC,OAAO,QAAQ,OAAR,CAAgB,cAAhB,CAAP;AAEtC,QAAM,OAAO,OAAO,SAAS,MAAhB,KAA2B,UAA3B,GACT,SAAS,MADA,GAET,eAAe,SAAS,MAAxB,CAFJ;AAGA;AACA,QAAI,CAAC,IAAL,EAAW,MAAM,IAAI,SAAJ,uBAAkC,SAAS,MAA3C,kBAAN;AAEX;AACA;AACA;AACA,WAAO,IAAI,OAAJ,CAAY;AAAA,eAAW,sBAAsB,SAAS,IAAT,CAAe,WAAf,EAAkC;AACpF,gBAAM,cAAc,cAAc,SAAlC;AACA,gBAAM,WAAW,KAAK,GAAL,CAAS,SAAS,QAAT,GAAoB,KAAK,GAAL,CAAS,cAAc,SAAS,QAAhC,EAA0C,CAA1C,CAApB,GAAmE,CAA5E,CAAjB;AAEA,sBAAU,SAAV,GAAsB,KAAK,KAAL,CAAW,gBAAgB,CAAC,iBAAiB,aAAlB,IAAmC,KAAK,QAAL,CAA9D,CAAtB;AAEA,gBAAI,aAAa,CAAb,IAAkB,UAAU,YAAV,GAAyB,UAAU,SAAnC,KAAiD,UAAU,YAAjF,EAA+F;AAC7F,uBAAO,QAAQ,cAAR,CAAP;AACD;AAED,kCAAsB,IAAtB;AACD,SAX6B,CAAX;AAAA,KAAZ,CAAP;AAYD;AAED,KAAK,SAAL,GAAiB,EAAjB;AACA,KAAK,IAAL,GAAY,YAAK,CAAG,CAApB;;IAEa,I,WAAA,I;;;AAGX,oBAAA;AAAA;;AAAA;;AAAA;;AAGE,sBAAO,IAAP;AACD;;;EAPuB,gB;;AACV,KAAA,QAAA,GAAW,MAAX","sourcesContent":["// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport * as easingPatterns from './easing-patterns'\nimport {\n  getContainer,\n  getOffset,\n} from './util'\n\n// Types\nimport { VuetifyGoToOptions, VuetifyGoToTarget } from 'vuetify/types/services/goto'\n\nimport { VuetifyServiceContract } from 'vuetify/types/services'\n\nexport default function goTo (\n  _target: VuetifyGoToTarget,\n  _settings: Partial<VuetifyGoToOptions> = {}\n): Promise<number> {\n  const settings: VuetifyGoToOptions = {\n    container: (document.scrollingElement as HTMLElement | null) || document.body || document.documentElement,\n    duration: 500,\n    offset: 0,\n    easing: 'easeInOutCubic',\n    appOffset: true,\n    ..._settings,\n  }\n  const container = getContainer(settings.container)\n\n  /* istanbul ignore else */\n  if (settings.appOffset && goTo.framework.application) {\n    const isDrawer = container.classList.contains('v-navigation-drawer')\n    const isClipped = container.classList.contains('v-navigation-drawer--clipped')\n    const { bar, top } = goTo.framework.application as any\n\n    settings.offset += bar\n    /* istanbul ignore else */\n    if (!isDrawer || isClipped) settings.offset += top\n  }\n\n  const startTime = performance.now()\n  const targetLocation = getOffset(_target) - settings.offset!\n  const startLocation = container.scrollTop\n  if (targetLocation === startLocation) return Promise.resolve(targetLocation)\n\n  const ease = typeof settings.easing === 'function'\n    ? settings.easing\n    : easingPatterns[settings.easing!]\n  /* istanbul ignore else */\n  if (!ease) throw new TypeError(`Easing function \"${settings.easing}\" not found.`)\n\n  // Cannot be tested properly in jsdom\n  // tslint:disable-next-line:promise-must-complete\n  /* istanbul ignore next */\n  return new Promise(resolve => requestAnimationFrame(function step (currentTime: number) {\n    const timeElapsed = currentTime - startTime\n    const progress = Math.abs(settings.duration ? Math.min(timeElapsed / settings.duration, 1) : 1)\n\n    container.scrollTop = Math.floor(startLocation + (targetLocation - startLocation) * ease(progress))\n\n    if (progress === 1 || container.clientHeight + container.scrollTop === container.scrollHeight) {\n      return resolve(targetLocation)\n    }\n\n    requestAnimationFrame(step)\n  }))\n}\n\ngoTo.framework = {} as Record<string, VuetifyServiceContract>\ngoTo.init = () => {}\n\nexport class Goto extends Service {\n  public static property = 'goTo'\n\n  constructor () {\n    super()\n\n    return goTo\n  }\n}\n"],"sourceRoot":""}