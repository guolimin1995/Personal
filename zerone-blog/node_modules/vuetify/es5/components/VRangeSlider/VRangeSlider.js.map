{"version":3,"sources":["../../../src/components/VRangeSlider/VRangeSlider.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VRangeSlider.sass'\n\n// Components\nimport VSlider from '../VSlider'\n\n// Helpers\nimport {\n  createRange,\n  deepEqual,\n} from '../../util/helpers'\n\n// Types\nimport { PropValidator } from 'vue/types/options'\n\n/* @vue/component */\nexport default VSlider.extend({\n  name: 'v-range-slider',\n\n  props: {\n    value: {\n      type: Array,\n      default: () => ([0, 0]),\n    } as PropValidator<number[]>,\n  },\n\n  data () {\n    return {\n      activeThumb: null as null | number,\n      lazyValue: this.value,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VSlider.options.computed.classes.call(this),\n        'v-input--range-slider': true,\n      }\n    },\n    internalValue: {\n      get (): number[] {\n        return this.lazyValue\n      },\n      set (val: number[]) {\n        // Round value to ensure the\n        // entire slider range can\n        // be selected with step\n        let value = val.map(v => this.roundValue(Math.min(Math.max(v, this.minValue), this.maxValue)))\n\n        // Switch values if range and wrong order\n        if (value[0] > value[1] || value[1] < value[0]) {\n          if (this.activeThumb !== null) {\n            const toFocus = this.activeThumb === 1 ? 0 : 1\n            const el = this.$refs[`thumb_${toFocus}`] as HTMLElement\n            el.focus()\n          }\n          value = [value[1], value[0]]\n        }\n\n        this.lazyValue = value\n        if (!deepEqual(value, this.value)) this.$emit('input', value)\n\n        this.validate()\n      },\n    },\n    inputWidth (): number[] {\n      return this.internalValue.map((v: number) => (\n        this.roundValue(v) - this.minValue) / (this.maxValue - this.minValue) * 100\n      )\n    },\n    trackFillStyles (): Partial<CSSStyleDeclaration> {\n      const styles = VSlider.options.computed.trackFillStyles.call(this)\n      const fillPercent = Math.abs(this.inputWidth[0] - this.inputWidth[1])\n      const dir = this.vertical ? 'height' : 'width'\n      const start = this.vertical ? this.$vuetify.rtl ? 'top' : 'bottom' : this.$vuetify.rtl ? 'right' : 'left'\n\n      styles[dir] = `${fillPercent}%`\n      styles[start] = `${this.inputWidth[0]}%`\n\n      return styles\n    },\n  },\n\n  methods: {\n    getTrackStyle (startLength: number, endLength: number, startPadding = 0, endPadding = 0) {\n      const startDir = this.vertical ? this.$vuetify.rtl ? 'top' : 'bottom' : this.$vuetify.rtl ? 'right' : 'left'\n      const endDir = this.vertical ? 'height' : 'width'\n\n      const start = `calc(${startLength}% + ${startPadding}px)`\n      const end = `calc(${endLength}% + ${endPadding}px)`\n\n      return {\n        transition: this.trackTransition,\n        [startDir]: start,\n        [endDir]: end,\n      }\n    },\n    getIndexOfClosestValue (arr: number[], v: number) {\n      if (Math.abs(arr[0] - v) < Math.abs(arr[1] - v)) return 0\n      else return 1\n    },\n    genInput () {\n      return createRange(2).map(i => {\n        const input = VSlider.options.methods.genInput.call(this)\n\n        input.data = input.data || {}\n        input.data.attrs = input.data.attrs || {}\n        input.data.attrs.value = this.internalValue[i]\n\n        return input\n      })\n    },\n    genTrackContainer () {\n      const children = []\n\n      if (this.disabled) {\n        const disabledPadding = 10\n        const sections: [number, number, number, number][] = [\n          [0, this.inputWidth[0], 0, -disabledPadding],\n          [this.inputWidth[0], Math.abs(this.inputWidth[1] - this.inputWidth[0]), disabledPadding, disabledPadding * -2],\n          [this.inputWidth[1], Math.abs(100 - this.inputWidth[1]), disabledPadding, 0],\n        ]\n\n        if (this.$vuetify.rtl) sections.reverse()\n\n        children.push(...sections.map(section => this.$createElement('div', this.setBackgroundColor(this.computedTrackColor, {\n          staticClass: 'v-slider__track-background',\n          style: this.getTrackStyle(...section),\n        }))))\n      } else {\n        children.push(\n          this.$createElement('div', this.setBackgroundColor(this.computedTrackColor, {\n            staticClass: 'v-slider__track-background',\n            style: this.getTrackStyle(0, 100),\n          })),\n          this.$createElement('div', this.setBackgroundColor(this.computedColor, {\n            staticClass: 'v-slider__track-fill',\n            style: this.trackFillStyles,\n          }))\n        )\n      }\n\n      return this.$createElement('div', {\n        staticClass: 'v-slider__track-container',\n        ref: 'track',\n      }, children)\n    },\n    genChildren () {\n      return [\n        this.genInput(),\n        this.genTrackContainer(),\n        this.genSteps(),\n        createRange(2).map(index => {\n          const value = this.internalValue[index]\n          const onDrag = (e: MouseEvent) => {\n            this.isActive = true\n            this.activeThumb = index\n            this.onThumbMouseDown(e)\n          }\n          const onFocus = (e: Event) => {\n            this.isFocused = true\n            this.activeThumb = index\n          }\n\n          const valueWidth = this.inputWidth[index]\n          const isActive = this.isActive && this.activeThumb === index\n          const isFocused = this.isFocused && this.activeThumb === index\n\n          return this.genThumbContainer(value, valueWidth, isActive, isFocused, onDrag, onFocus, `thumb_${index}`)\n        }),\n      ]\n    },\n    onFocus (index: number) {\n      this.isFocused = true\n      this.activeThumb = index\n    },\n    onBlur () {\n      this.isFocused = false\n      this.activeThumb = null\n    },\n    onSliderClick (e: MouseEvent) {\n      if (!this.isActive) {\n        // It doesn't seem to matter if we focus on the wrong thumb here\n        const thumb = this.$refs.thumb_1 as HTMLElement\n        thumb.focus()\n\n        this.onMouseMove(e, true)\n        this.$emit('change', this.internalValue)\n      }\n    },\n    onMouseMove (e: MouseEvent, trackClick = false) {\n      const { value, isInsideTrack } = this.parseMouseMove(e)\n\n      if (isInsideTrack) {\n        if (trackClick) this.activeThumb = this.getIndexOfClosestValue(this.internalValue, value)\n      }\n\n      this.setInternalValue(value)\n    },\n    onKeyDown (e: KeyboardEvent) {\n      if (this.activeThumb === null) return\n\n      const value = this.parseKeyDown(e, this.internalValue[this.activeThumb])\n\n      if (value == null) return\n\n      this.setInternalValue(value)\n      this.$emit('change', value)\n    },\n    setInternalValue (value: number) {\n      this.internalValue = this.internalValue.map((v: number, i: number) => {\n        if (i === this.activeThumb) return value\n        else return Number(v)\n      })\n    },\n  },\n})\n"],"sourceRoot":""}